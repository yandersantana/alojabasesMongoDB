<div *ngIf="mostrarLoading">
    <app-loading-messagge [messagge]="mensajeLoading"></app-loading-messagge>
</div>

<br><br>
<div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-10">
        <div class="card">
            <h5 class="card-header text-center font-weight-bold text-uppercase ">CAJA MENOR</h5>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-8">
                        <div class="row">
                            <div class="row">
                                <div class="col-md-2"></div>
                                <div class="col-md-10">
                                    <div class="row">
                                        <div class="col-md-6 textP">Fecha</div>
                                        <div class="col-md-6">{{cajaMenor.fecha}}</div>

                                        <div class="col-md-6 textP">Estado</div>
                                        <div class="col-md-6">{{cajaMenor.estado}}</div>

                                        <div class="col-md-6 textP">Sucursal</div>
                                        <div class="col-md-6">{{cajaMenor.sucursal}}</div>

                                        <div class="col-md-6 textP">Usuario</div>
                                        <div class="col-md-6">{{cajaMenor.usuario}}</div>
                                    </div>
                                </div>
                            </div>
                           
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div style="text-align: center;">CONSECUTIVO</div>
                        <div style="text-align: center;font-size: 4rem;margin-top: -1rem;">{{cajaMenor.idDocumento}}</div>
                    </div>
                </div>
            </div>
        </div>

        <br>
        <dx-data-grid
            id="gridContainer"
            [dataSource]="transaccionesCaja"
            [showBorders]="true">
            <dxo-selection mode="single"></dxo-selection>

            <dxi-column caption="" width="4%"></dxi-column> 
            <dxi-column dataField="Orden" caption="" width="7%" sortOrder="desc" [visible]="false" ></dxi-column> 
            <dxi-column dataField="SubCuenta" caption="SUBCUENTA" width="25%"></dxi-column>
            <dxi-column dataField="Sub1" caption="DOC"></dxi-column>
            <dxi-column dataField="Sub2" caption="CC"></dxi-column>
            <dxi-column dataField="Cuenta" caption="" [groupIndex]="0" sortOrder="asc"></dxi-column>

            <dxi-column dataField="TotalIngresos" caption="INGRESOS" alignment="right" format="currency"></dxi-column>
            <dxi-column dataField="TotalSalidas" caption="SALIDAS" alignment="right" format="currency"></dxi-column>
            <dxi-column dataField="TotalRC" caption="RyT" alignment="right" format="currency"></dxi-column>

            <dxo-summary>
                <dxi-group-item
                column="TotalIngresos"
                summaryType="sum"
                displayFormat="{0}"
                valueFormat="currency"
                [showInGroupFooter]="false"
                [alignByColumn]="true"
                >
                </dxi-group-item>
                <dxi-group-item
                column="TotalSalidas"
                summaryType="sum"
                 displayFormat="{0}"
                valueFormat="currency"
                [showInGroupFooter]="false"
                [alignByColumn]="true"
                >
                </dxi-group-item>
                  <dxi-group-item
                column="TotalRC"
                summaryType="sum"
                 displayFormat="{0}"
                valueFormat="currency"
                [showInGroupFooter]="false"
                [alignByColumn]="true"
                >
                </dxi-group-item>
<!--                 <dxi-group-item
                column="TotalAmount"
                summaryType="sum"
                valueFormat="currency"
                displayFormat="Total: {0}"
                [showInGroupFooter]="true"
                >
                </dxi-group-item> -->
            </dxo-summary>

            <dxi-sort-by-group-summary-info
                summaryItem="count"
            ></dxi-sort-by-group-summary-info>

            <dxi-sort-by-group-summary-info
            summaryItem="count"
            ></dxi-sort-by-group-summary-info>

            <dxo-summary>
                <dxi-total-item
                    column="SubCuenta"
                    displayFormat="BALANCE CAJA"
                    alignment="center">

                </dxi-total-item>

                <dxi-total-item
                    column="TotalIngresos"
                    dataType="number"
                    summaryType="sum"
                    showInColumn="TotalAmount"
                    displayFormat="$ {0}"
                    alignment="right">
                    <dxo-format
                        type="number"
                        [precision]="2">
                    </dxo-format>
                </dxi-total-item>

                <dxi-total-item
                    column="TotalSalidas"
                    dataType="number"
                    summaryType="sum"
                    showInColumn="TotalAmount"

                    displayFormat="$ {0}"
                    alignment="right">
                    <dxo-format
                        type="number"
                        [precision]="2">
                    </dxo-format>
                </dxi-total-item>

                <dxi-total-item
                    column="TotalRC"
                    dataType="number"
                    summaryType="sum"
                    showInColumn="TotalAmount"
            
                    displayFormat="$ {0}"
                    alignment="right">
                    <dxo-format
                        type="number"
                        [precision]="2">
                    </dxo-format>
                </dxi-total-item>
            </dxo-summary>
            <dxo-remote-operations [sorting]="true"></dxo-remote-operations>
        </dx-data-grid>
        <div class="row sectionDatos">
            <div class="col-md-5" style="text-align: center;margin-top: 1.2em;">RESULTADO DEL EJERCICIO</div>
            <div class="col-md-7" style="text-align: right;margin-top: 1.2em;">${{resultado}}</div>
            <hr width="100%">
            <div class="col-md-5" style="text-align: center;margin-bottom: 1.2em;">ESTADO DE LA CAJA</div>
            <div class="col-md-7" style="text-align: right;margin-bottom: 1.2em;">{{estadoCuenta}}</div>
        </div>
        <br>
        <!-- <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4">
                <button class="btn btn-block btn-success" style="background-color: #ff5722;border-color: #ff5722;" (click)="guardarCajaMenor()">Cerrar Caja</button>
            </div>
            <div class="col-md-4"></div>
        </div> -->
        
    </div>
    <div class="col-md-1"></div>



    
</div>
